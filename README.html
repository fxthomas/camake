<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><title>OpenSSL - ArchWiki</title>
<meta name="generator" content="MediaWiki 1.22.9" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="https://wiki.archlinux.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.archlinux&amp;only=styles&amp;skin=archlinux&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/skins/archlinux/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/archlinux/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />

<script src="https://wiki.archlinux.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=archlinux&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"OpenSSL","wgTitle":"OpenSSL","wgCurRevisionId":328400,"wgRevisionId":328400,"wgArticleId":7095,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Networking","Security"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"OpenSSL","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"archlinux","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":
0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: archwiki:resourceloader:filter:minify-js:7:85c90aa16eaeef41f8c16fb94950cfbf */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-OpenSSL skin-archlinux action-view">

<div id="archnavbar"><!-- Arch Linux global navigation bar -->
	<div id="archnavbarlogo">
		<p><a id="logo" href="http://www.archlinux.org/"></a></p>
	</div>
	<div id="archnavbarmenu">
		<ul id="archnavbarlist">
			<li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki" class="anb-selected"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li>		</ul>
	</div>
</div><!-- #archnavbar -->

<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">OpenSSL</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From ArchWiki</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div style="padding: 5px; margin: 0.50em 0; background-color: #FFDDDD; border: thin solid #DDBBBB; overflow: hidden;"><strong> Warning: </strong>A serious vulnerability was discovered affecting some of the OpenSSL 1.0.1 releases. The vulnerability leaves private keys compromised and it is adviseable to regenerate these and the corresponding certificates if an affected version of OpenSSL was deployed. Cf. <a rel="nofollow" class="external free" href="http://heartbleed.com/">http://heartbleed.com/</a> and <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/39775">FS#39775</a>.</div>
<p><a rel="nofollow" class="external text" href="http://www.openssl.org">OpenSSL</a> is an open-source implementation of the SSL and TLS protocols, dual-licensed under the OpenSSL and the SSLeay licenses. It is supported on a variety of platforms, including BSD, Linux, OpenVMS, Solaris and Windows. It is designed to be as flexible as possible, and is free to use for both personal and commercial uses. It is based on the earlier SSLeay library. Version 1.0.0 of OpenSSL was released on March 29, 2010.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#SSL_introduction"><span class="tocnumber">1</span> <span class="toctext">SSL introduction</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Certificate_authority_.28CA.29"><span class="tocnumber">1.1</span> <span class="toctext">Certificate authority (CA)</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#CA_private_key"><span class="tocnumber">1.1.1</span> <span class="toctext">CA private key</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="#CA_certificate_and_public_key"><span class="tocnumber">1.1.2</span> <span class="toctext">CA certificate and public key</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="#End-users"><span class="tocnumber">1.2</span> <span class="toctext">End-users</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#End-user_generated_key"><span class="tocnumber">1.2.1</span> <span class="toctext">End-user generated key</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Certificate_requests"><span class="tocnumber">1.2.2</span> <span class="toctext">Certificate requests</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#End-user_certificate"><span class="tocnumber">1.2.3</span> <span class="toctext">End-user certificate</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Certificate_revocation_list_.28CRL.29"><span class="tocnumber">1.2.4</span> <span class="toctext">Certificate revocation list (CRL)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Configuring"><span class="tocnumber">2</span> <span class="toctext">Configuring</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Global_variables"><span class="tocnumber">2.1</span> <span class="toctext">Global variables</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#ca_section"><span class="tocnumber">2.2</span> <span class="toctext">ca section</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#req_section"><span class="tocnumber">2.3</span> <span class="toctext">req section</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#CA_req_settings"><span class="tocnumber">2.3.1</span> <span class="toctext">CA req settings</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#End-user_req_settings"><span class="tocnumber">2.3.2</span> <span class="toctext">End-user req settings</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#GOST_engine_support"><span class="tocnumber">2.4</span> <span class="toctext">GOST engine support</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#Generating_keys"><span class="tocnumber">3</span> <span class="toctext">Generating keys</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#Making_requests"><span class="tocnumber">4</span> <span class="toctext">Making requests</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#Signing_certificates"><span class="tocnumber">5</span> <span class="toctext">Signing certificates</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Self-signed_certificate"><span class="tocnumber">5.1</span> <span class="toctext">Self-signed certificate</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Certificate_authority"><span class="tocnumber">5.2</span> <span class="toctext">Certificate authority</span></a>
<ul>
<li class="toclevel-3 tocsection-22"><a href="#Makefile"><span class="tocnumber">5.2.1</span> <span class="toctext">Makefile</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="SSL_introduction">SSL introduction</span></h2>
<p>In order to focus on setting up a SSL/TLS solution, rather than explaining the bare basics regarding the subject, the approach used throughout the article to explain SSL concepts is by and large file-oriented.
</p><p>Consult both <a href="http://en.wikipedia.org/wiki/Certificate_authority" class="extiw" title="wikipedia:Certificate authority">Wikipedia:Certificate authority</a> and <a href="http://en.wikipedia.org/wiki/Public_key_infrastructure" class="extiw" title="wikipedia:Public key infrastructure">Wikipedia:Public key infrastructure</a> for more information.
</p>
<h3><span class="mw-headline" id="Certificate_authority_.28CA.29">Certificate authority (CA)</span></h3>
<p>Certificate authorities return certificates from end-user requests. In order to do this, the returned end-user certificate is signed with the CA private key and CA certificate, which in turn contains the CA public key. CA also distribute certificate revocation lists (CRL) which tell the end-user what certificates are no longer valid, and when the next CRL is due.
</p>
<h4><span class="mw-headline" id="CA_private_key">CA private key</span></h4>
<p>The CA private key is the crucial part of the trifecta. Exposing it would defeat the purpose of designating a central authority that validates and revokes permissions, and at the same time, it is the signed counter part to the CA public key used to certify against the CA certificate. An exposed CA private key could allow an attacker to replicate the CA certificate since the CA private key signature is embedded in the CA certificate itself.
</p>
<h4><span class="mw-headline" id="CA_certificate_and_public_key">CA certificate and public key</span></h4>
<p>These are distributed in a single file to all end-users. They are used to certify other end-user certificates that claimed to be signed by the matching CA, such as mail servers or websites. 
</p>
<h3><span class="mw-headline" id="End-users">End-users</span></h3>
<p>End-users submit certificate requests to the CA which contain a distinguished name (DN). Normally, CA do not allow more than one valid certificate with the same DN without revoking the previous one. End-user certificates may be revoked if they are not renewed when due, among other reasons.
</p>
<h4><span class="mw-headline" id="End-user_generated_key">End-user generated key</span></h4>
<p>End-users generate keys in order to sign certificate requests that are submitted to the CA. As with the CA private key, an exposed user-key could facilitate impersonating the user to the point where an attacker could submit a request under the user's name, resulting in the CA revoking the former, legitimate, user certificate.
</p>
<h4><span class="mw-headline" id="Certificate_requests">Certificate requests</span></h4>
<p>These contain the user's DN and public key. As their name implies, they fully represent the initial part of the process of acquiring certification from a CA.
</p>
<h4><span class="mw-headline" id="End-user_certificate">End-user certificate</span></h4>
<p>The main distinction between an end-user certificate and CA certificate is that end-user ones cannot sign certificates themselves; they merely provide means of identification in exchanges of information.
</p>
<h4><span class="mw-headline" id="Certificate_revocation_list_.28CRL.29">Certificate revocation list (CRL)</span></h4>
<p>CRLs are also signed with the CA key, but they only dictate information regarding end-user certificates. Usually, a 30 day span is given between new CRL submissions.
</p>
<h2><span class="mw-headline" id="Configuring">Configuring</span></h2>
<p>The OpenSSL configuration file, conventionally placed in <code style="display:inline-block; padding: 0.1em 0.3em;">/etc/ssl/openssl.cnf</code>, may appear complicated at first. This isn't remedied by the fact that there's no <i>include</i> directive to split configuration into a modal setup.  Nevertheless, this section covers the essential settings.
</p><p>Remember that variables may be expanded in assignments, much like how shell scripts work. For a more thorough explanation of the configuration file format, see <i>config(5)</i>. In some operating systems, this <a href="/index.php/Man" title="Man" class="mw-redirect">man</a> page is named <i>openssl-config</i> or <i>config(5ssl)</i>. Sometimes, it may not even be available through the man hierarchy at all, for example, it may be placed in the following location <code style="display:inline-block; padding: 0.1em 0.3em;">/usr/share/openssl</code>.
</p>
<h3><span class="mw-headline" id="Global_variables">Global variables</span></h3>
<p>These settings are relevant in all sections. For that to happen, they can not be specified under a section header:
</p>
<pre>
DIR=		.			# Useful macro for populating real vars.
RANDFILE=	${DIR}/private/.rnd	# Entropy source.
default_md=	sha1			# Default message digest.
</pre>
<h3><span class="mw-headline" id="ca_section">ca section</span></h3>
<p>These settings are used when signing CRLs, and signing and revoking certificates. Users that only want to generate requests can safely skip to the <a href="#req_section">#req section</a>.
</p>
<pre>
[ ca ]
default_ca=	dft_ca	# Configuration files may have more than one CA
			# section for different scenarios.

[ dft_ca ]
certificate=	${DIR}/cacert.pem	# The CA certificate.
database=	${DIR}/index.txt	# Keeps tracks of valid/revoked certs.
new_certs_dir=	${DIR}/newcerts		# Copies of signed certificates, for
					# administrative purposes.
private_key=	${DIR}/private/cakey.pem # The CA key.
serial=		${DIR}/serial		# Should be populated with the next
					# cert hex serial.

# These govern the way certificates are displayed while confirming
# the signing process.
name_opt=	ca_default
cert_opt=	ca_default

default_days=	365	# How long to sign certificates for.
default_crl_days=30	# The same, but for CRL.

policy=		dft_policy	# The default policy should be lenient.
x509_extensions=cert_v3		# For v3 certificates.

[ dft_policy ]
# A value of 'supplied' means the field must be present in the certificate,
# whereas 'match' means the field must be populated with the same contents as
# the CA certificate. 'optional' dictates that the field is entirely optional.

C=	supplied	# Country
ST=	supplied	# State or province
L=	optional	# Locality
O=	supplied	# Organization
OU=	optional	# Organizational unit
CN=	supplied	# Common name

[ cert_v3 ]
# With the exception of 'CA:FALSE', there are PKIX recommendations for end-user
# certificates that should not be able to sign other certificates.
# 'CA:FALSE' is explicitely set because some software will malfunction without.

subjectKeyIdentifier=	hash
basicConstraints=	CA:FALSE
keyUsage=		nonRepudiation, digitalSignature, keyEncipherment

nsCertType=		client, email
nsComment=		&quot;OpenSSL Generated Certificate&quot;

authorityKeyIdentifier=keyid:always,issuer:always
</pre>
<h3><span class="mw-headline" id="req_section">req section</span></h3>
<p>Settings related to generating keys, requests and self-signed certificates.
</p><p>The req section is responsible for the DN prompts. A general misconception is the <i>Common Name</i> (CN) prompt, which suggests that it should have the user's proper name as a value. End-user certificates need to have the <b>machine hostname</b> as CN, whereas CA should <i>not</i> have a valid TLD, so that there's no chance that, between the possible combinations of certified end-users' CN and the CA certificate's, there's a match that could be misinterpreted by some software as meaning that the end-user certificate is self-signed. Some CA certificates do not even have a CN, such as <a rel="nofollow" class="external text" href="http://www.equifax.com">Equifax</a>:
</p>
<pre># subject= /C=US/O=Equifax/OU=Equifax Secure Certificate Authority
openssl x509 -subject -noout &lt; /etc/ssl/certs/Equifax_Secure_CA.pem
</pre>
<p>Even though splitting the files isn't strictly necessary to normal functioning, it is very confusing to handle request generation and CA administration from the same configuration file, so it is advised to follow the convention of clearly separating the settings into two <code style="display:inline-block; padding: 0.1em 0.3em;">cnf</code> files and into two containing directories.
</p><p>Here are the settings that are common to both tasks:
</p>
<pre>
[ req ]
# Default bit encryption and out file for generated keys.
default_bits=	1024
default_keyfile=private/cakey.pem

string_mask=	utf8only	# Only allow utf8 strings in request/ca fields.
prompt=		no		# Do not prompt for field value confirmation.
</pre>
<h4><span class="mw-headline" id="CA_req_settings">CA req settings</span></h4>
<p>The settings should produce a standard CA capable of only singing other certificates:
</p>
<pre>
distinguished_name=ca_dn	# Distinguished name contents.
x509_extensions=ca_v3		# For generating ca certificates.

[ ca_dn ]
# CN isn't needed for CA certificates
C=	US
ST=	New Jersey
O=	localdomain

[ ca_v3 ]
subjectKeyIdentifier=	hash

# PKIX says this should also contain the 'crucial' value, yet some programs
# have trouble handling it.
basicConstraints=	CA:TRUE

keyUsage=	cRLSign, keyCertSign

nsCertType=	sslCA
nsComment=	&quot;OpenSSL Generated CA Certificate&quot;

authorityKeyIdentifier=keyid:always,issuer:always
</pre>
<h4><span class="mw-headline" id="End-user_req_settings">End-user req settings</span></h4>
<p>Makes a v3 request suitable for most circumstances:
</p>
<pre>
distinguished_name=ca_dn	# Distinguished name contents.
req_extensions=req_v3		# For generating ca certificates.

[ ca_dn ]
C=	US
ST=	New Jersey
O=	localdomain
CN=	localhost

[ req_v3 ]
basicConstraints=	CA:FALSE
keyUsage=		nonRepudiation, digitalSignature, keyEncipherment
</pre>
<h3><span class="mw-headline" id="GOST_engine_support">GOST engine support</span></h3>
<p>First, be sure that libgost.so exist on your system
</p>
<pre>pacman -Ql openssl | grep libgost
</pre>
<p>In case everything is fine, add the following lines to the config:
</p>
<pre>openssl_conf = openssl_def # this must be a top-level declaration
</pre>
<p>Put the following lines in the end of the document:
</p>
<pre>[ openssl_def ]
engines = engine_section

[ engine_section ]
gost = gost_section

[ gost_section ]
engine_id = gost
soft_load = 1
dynamic_path = /usr/lib/engines/libgost.so
default_algorithms = ALL
CRYPT_PARAMS = id-Gost28147-89-CryptoPro-A-ParamSet
</pre>
<p>The official <a rel="nofollow" class="external text" href="http://ftp.netbsd.org/pub/NetBSD/NetBSD-current/src/crypto/external/bsd/openssl/dist/engines/ccgost/README.gost">README.gost</a> should contain more examples on this.
</p>
<h2><span class="mw-headline" id="Generating_keys">Generating keys</span></h2>
<p>Before generating the key, make a secure directory to host it:
</p>
<pre>mkdir -m0700 private
</pre>
<p>Followed by preemptively assigning secure permissions for the key itself:
</p>
<pre>touch private/key.pem
chmod 0600 private/key.pem
</pre>
<p>An example <code style="display:inline-block; padding: 0.1em 0.3em;">genpkey</code> key generation:
</p>
<pre>openssl genpkey -algorithm RSA -out private/key.pem -pkeyopt rsa_keygen_bits:4096
</pre>
<p>If an encrypted key is desired, use the following command and remember to enter EOF, usually <code style="display:inline-block; padding: 0.1em 0.3em;">Ctrl</code>+<code style="display:inline-block; padding: 0.1em 0.3em;">D</code>, to indicate the end of the password string:
</p>
<pre>openssl genpkey -pass stdin -algorithm RSA -out private/key.pem -pkeyopt rsa_keygen_bits:4096
</pre>
<h2><span class="mw-headline" id="Making_requests">Making requests</span></h2>
<p>To obtain a certificate from a CA, whether it be a public one such as <a rel="nofollow" class="external text" href="http://www.cacert.org">CAcert.org</a>, or a locally managed solution, a request file must be delivered to the CA, and these are conventionally called <code style="display:inline-block; padding: 0.1em 0.3em;">csr</code> files.
</p><p>Make a new request and sign it with a previously <a href="#Generating_keys">generated key</a>:
</p>
<pre>openssl req -new -key private/key.pem -out req.csr
</pre>
<h2><span class="mw-headline" id="Signing_certificates">Signing certificates</span></h2>
<p>Covers the process of local CA signing: directly self-signed certificates or through a local CA.
</p>
<h3><span class="mw-headline" id="Self-signed_certificate">Self-signed certificate</span></h3>
<p>A significant amount of programs will not work with self-signed certificates, and maintaining more than one system with self-signed certificates is more trouble than investing the initial effort in setting up a <a href="#Certificate_authority">certificate authority</a>.
</p><p>If a key was already generated as <a href="#Generating_keys">explained before</a>, use this command to sign the new certificate with the aforementioned key:
</p>
<pre>openssl req -key private/key.pem -x509 -new -days 3650 -out cacert.pem
</pre>
<h3><span class="mw-headline" id="Certificate_authority">Certificate authority</span></h3>
<p>The method shown in this section is mostly meant to show how signing works; it is not suited for large deployments that need to automate signing a large number of certificates. Consider installing an SSL server for that purpose.
</p><p>Before using the Makefile, make a configuration file according to <a href="#Configuring">#Configuring</a>. Be sure to follow instructions relevant to CA administration; not request generation.
</p>
<h4><span class="mw-headline" id="Makefile">Makefile</span></h4>
<p>Saving the file as <code style="display:inline-block; padding: 0.1em 0.3em;">Makefile</code> and issuing <code style="display:inline-block; padding: 0.1em 0.3em;">make</code> in the containing directory will generate the initial CRL along with its prerequisites:
</p>
<pre>
OPENSSL=	openssl
CNF=		openssl.cnf
CA=		${OPENSSL} ca -config ${CNF}
REQ=		${OPENSSL} req -config ${CNF}

KEY=		private/cakey.pem
KEYMODE=	RSA

CACERT=		cacert.pem
CADAYS=		3650

CRL=		crl.pem
INDEX=		index.txt
SERIAL=		serial


CADEPS=		${CNF} ${KEY} ${CACERT}

all:	${CRL}

${CRL}:	${CADEPS}
	${CA} -gencrl -out ${CRL}

${CACERT}: ${CNF} ${KEY}
	${REQ} -key ${KEY} -x509 -new -days ${CADAYS} -out ${CACERT}
	rm -f ${INDEX}
	touch ${INDEX}
	echo 100001 &gt; ${SERIAL}

${KEY}: ${CNF}
	mkdir -m0700 -p $(dir ${KEY})
	touch ${KEY}
	chmod 0600 ${KEY}
	${OPENSSL} genpkey -algorithm ${KEYMODE} -out ${KEY}


revoke:	${CADEPS} ${item}
	@test -n $${item:?'usage: ${MAKE} revoke item=cert.pem'}
	${CA} -revoke ${item}
	${MAKE} ${CRL}

sign:	${CADEPS} ${item}
	@test -n $${item:?'usage: ${MAKE} sign item=request.csr'}
	mkdir -p newcerts
	${CA} -in ${item} -out ${item:.csr=.crt} 
</pre>
<p>To sign certificates:
</p>
<pre>make sign item=<b>req.csr</b>
</pre>
<p>To revoke certificates:
</p>
<pre>make revoke item=<b>cert.pem</b>
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li> <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/OpenSSL">Wikipedia page</a> on OpenSSL, with background information.
</li>
<li> <a rel="nofollow" class="external text" href="http://www.openssl.org">OpenSSL</a> project page.
</li>
<li> <a rel="nofollow" class="external text" href="http://www.freebsd.org/doc/en/books/handbook/openssl.html">FreeBSD Handbook</a>
</li>
<li> <a rel="nofollow" class="external text" href="http://www.akadia.com/services/ssh_test_certificate.html">Step-by-step guide to create a signed SSL certificate</a>
</li>
</ul>

<!-- 
NewPP limit report
CPU time usage: 0.027 seconds
Real time usage: 0.028 seconds
Preprocessor visited node count: 286/1000000
Preprocessor generated node count: 740/1000000
Post‐expand include size: 2495/2097152 bytes
Template argument size: 1383/2097152 bytes
Highest expansion depth: 7/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key archwiki:pcache:idhash:7095-0!*!0!!en!*!* and timestamp 20140911175644
 -->
</div><div class="printfooter">
Retrieved from "<a href="https://wiki.archlinux.org/index.php?title=OpenSSL&amp;oldid=328400">https://wiki.archlinux.org/index.php?title=OpenSSL&amp;oldid=328400</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/index.php/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/index.php/Category:Networking" title="Category:Networking">Networking</a></li><li><a href="/index.php/Category:Security" title="Category:Security">Security</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<h2>Navigation menu</h2>
	<div id="p-cactions" class="portlet" role="navigation">
		<h3>Views</h3>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="/index.php/OpenSSL" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk"><a href="/index.php/Talk:OpenSSL" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="/index.php?title=OpenSSL&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="/index.php?title=OpenSSL&amp;action=history" rel="archives" title="Past revisions of this page [h]" accesskey="h">History</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal" role="navigation">
		<h3>Personal tools</h3>
		<div class="pBody">
			<ul>
				<li id="pt-createaccount"><a href="/index.php?title=Special:UserLogin&amp;returnto=OpenSSL&amp;type=signup">Create account</a></li>
				<li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=OpenSSL" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo" role="banner">
<a href="/index.php/Main_page" style="background-image: url(/skins/archlinux/archlogo.png);" title="Visit the main page"></a>
	</div>
	<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/index.php/Main_page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-categories"><a href="/index.php/Table_of_contents">Categories</a></li>
				<li id="n-portal"><a href="/index.php/Getting_involved" title="Various ways Archers can contribute to the community">Getting involved</a></li>
				<li id="n-currentevents"><a href="/index.php/ArchWiki:News" title="The latest lowdown on the wiki">Wiki news</a></li>
				<li id="n-randompage"><a href="/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet" role="search">
		<h3><label for="searchInput">Search</label></h3>
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform">
				<input type='hidden' name="title" value="Special:Search"/>
				<input type="search" name="search" placeholder="Search" title="Search ArchWiki [f]" accesskey="f" id="searchInput" />
				<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
				<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
			</form>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-interaction" role="navigation">
		<h3>interaction</h3>
		<div class='pBody'>
			<ul>
				<li id="n-help"><a href="/index.php/Category:Help" title="Wiki navigation, reading, and editing help">Help</a></li>
				<li id="n-Contributing"><a href="/index.php/ArchWiki:Contributing">Contributing</a></li>
				<li id="n-recentchanges"><a href="/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-Recent-talks"><a href="https://wiki.archlinux.org/index.php/Special:RecentChanges?namespace=0&amp;invert=1" rel="nofollow">Recent talks</a></li>
				<li id="n-newpages"><a href="/index.php/Special:NewPages">New pages</a></li>
				<li id="n-Reports"><a href="/index.php/ArchWiki:Reports">Reports</a></li>
				<li id="n-Requests"><a href="/index.php/ArchWiki:Requests">Requests</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-tb" role="navigation">
		<h3>Tools</h3>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/index.php/Special:WhatLinksHere/OpenSSL" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/index.php/Special:RecentChangesLinked/OpenSSL" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
				<li id="t-specialpages"><a href="/index.php/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/index.php?title=OpenSSL&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
				<li id="t-permalink"><a href="/index.php?title=OpenSSL&amp;oldid=328400" title="Permanent link to this revision of the page">Permanent link</a></li>
				<li id="t-info"><a href="/index.php?title=OpenSSL&amp;action=info">Page information</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer" role="contentinfo">
	<ul id="f-list">
		<li id="lastmod"> This page was last modified on 3 August 2014, at 21:50.</li>
		<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
		<li id="privacy"><a href="/index.php/ArchWiki:Privacy_policy" title="ArchWiki:Privacy policy">Privacy policy</a></li>
		<li id="about"><a href="/index.php/ArchWiki:About" title="ArchWiki:About">About ArchWiki</a></li>
		<li id="disclaimer"><a href="/index.php/ArchWiki:General_disclaimer" title="ArchWiki:General disclaimer">Disclaimers</a></li>
	</ul>
</div>
</div>
<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.060 secs. --></body><!-- Cached/compressed 20140911175644 -->
</html>